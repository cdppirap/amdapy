
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>amdapy.spase &#8212; amdapy 1 documentation</title>
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">amdapy 1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for amdapy.spase</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">:author: Alexandre Schulz</span>
<span class="sd">:email: alexandre.schulz@irap.omp.eu</span>
<span class="sd">:file: spase.py</span>
<span class="sd">:brief: Classes and functions for manipulating SPASE XML resource files</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">lxml</span> <span class="k">import</span> <span class="n">etree</span>
<span class="kn">from</span> <span class="nn">lxml.etree</span> <span class="k">import</span> <span class="n">tostring</span>
<span class="kn">from</span> <span class="nn">colorama</span> <span class="k">import</span> <span class="n">Fore</span><span class="p">,</span> <span class="n">Style</span>

<span class="c1">## Default root path of the SPASE directory.</span>
<span class="n">DEFAULT_REPOSITORY_ROOT</span><span class="o">=</span><span class="s2">&quot;/home/aschulz/Documents&quot;</span>
<span class="c1">## SPASE address prefix</span>
<span class="n">SPASE_ADDR_PREFIX</span><span class="o">=</span><span class="s2">&quot;spase://&quot;</span>
<span class="c1">## Default time format</span>
<span class="n">DATETIME_FORMAT</span><span class="o">=</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%SZ&quot;</span>
<span class="c1">## Color mapping.</span>
<span class="n">cmap</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;g&quot;</span><span class="p">:</span><span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">:</span><span class="n">Fore</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span><span class="n">Fore</span><span class="o">.</span><span class="n">BLUE</span><span class="p">}</span>

<div class="viewcode-block" id="strcol"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.strcol">[docs]</a><span class="k">def</span> <span class="nf">strcol</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Format a string to print in color</span>

<span class="sd">  :param s: string to print</span>
<span class="sd">  :type s: str</span>
<span class="sd">  :param c: color</span>
<span class="sd">  :type c: colorama.Style.Color</span>
<span class="sd">  :return: colored string</span>
<span class="sd">  :rtype: str</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">return</span> <span class="n">cmap</span><span class="p">[</span><span class="n">c</span><span class="p">]</span><span class="o">+</span><span class="n">s</span><span class="o">+</span><span class="n">Style</span><span class="o">.</span><span class="n">RESET_ALL</span></div>

<span class="c1">## SPASE XML tags</span>
<span class="c1">#</span>
<span class="c1">#  Enumeration of SPASE XML tags.</span>
<span class="n">SPASE_TAG</span><span class="o">=</span><span class="s2">&quot;Spase&quot;</span>
<span class="n">NUMERICALDATA_TAG</span><span class="o">=</span><span class="s2">&quot;NumericalData&quot;</span>
<span class="n">INSTRUMENT_TAG</span><span class="o">=</span><span class="s2">&quot;Instrument&quot;</span>
<span class="n">OBSERVATORY_TAG</span><span class="o">=</span><span class="s2">&quot;Observatory&quot;</span>
<span class="n">PERSON_TAG</span><span class="o">=</span><span class="s2">&quot;Person&quot;</span>
<span class="n">RESOURCEID_TAG</span><span class="o">=</span><span class="s2">&quot;ResourceID&quot;</span>
<span class="n">INSTRUMENTID_TAG</span><span class="o">=</span><span class="s2">&quot;InstrumentID&quot;</span>
<span class="n">REPOSITORYID_TAG</span><span class="o">=</span><span class="s2">&quot;RepositoryID&quot;</span>
<span class="n">CONTACT_TAG</span><span class="o">=</span><span class="s2">&quot;Contact&quot;</span>
<span class="n">PERSONID_TAG</span><span class="o">=</span><span class="s2">&quot;PersonID&quot;</span>
<span class="n">ROLE_TAG</span><span class="o">=</span><span class="s2">&quot;Role&quot;</span>
<span class="n">ELEMENT_TAG</span><span class="o">=</span><span class="s2">&quot;Element&quot;</span>
<span class="n">STRUCTURE_TAG</span><span class="o">=</span><span class="s2">&quot;Structure&quot;</span>
<span class="n">NAME_TAG</span><span class="o">=</span><span class="s2">&quot;Name&quot;</span>
<span class="n">INDEX_TAG</span><span class="o">=</span><span class="s2">&quot;Index&quot;</span>
<span class="n">PARAMETERKEY_TAG</span><span class="o">=</span><span class="s2">&quot;ParameterKey&quot;</span>
<span class="n">COORDINATESYSTEM_TAG</span><span class="o">=</span><span class="s2">&quot;CoordinateSystem&quot;</span>
<span class="n">COORDINATEREPRESENTATION_TAG</span><span class="o">=</span><span class="s2">&quot;CoordinateRepresentation&quot;</span>
<span class="n">COORDINATESYSTEMNAME_TAG</span><span class="o">=</span><span class="s2">&quot;CoordinateSystemName&quot;</span>
<span class="c1">## SPASE types.</span>
<span class="c1">#</span>
<span class="c1">#  List of SPASE resource types.</span>
<span class="n">NUMERICALDATA_TYPE</span><span class="o">=</span><span class="s2">&quot;NumericalData&quot;</span>
<span class="n">INSTRUMENT_TYPE</span><span class="o">=</span><span class="s2">&quot;Instrument&quot;</span>
<span class="n">OBSERVATORY_TYPE</span><span class="o">=</span><span class="s2">&quot;Observatory&quot;</span>
<span class="n">PERSON_TYPE</span><span class="o">=</span><span class="s2">&quot;Person&quot;</span>

<span class="c1">## SpaseAddr class documentation.</span>
<span class="c1">#</span>
<span class="c1">#  SPASE resource identification representation.</span>
<div class="viewcode-block" id="SpaseAddr"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseAddr">[docs]</a><span class="k">class</span> <span class="nc">SpaseAddr</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;SPASE resource address container. Contains the address of a SPASE resource with respect to its root</span>
<span class="sd">  directory.</span>

<span class="sd">  :param v: value</span>
<span class="sd">  :type v: str</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">v</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">SpaseAddr</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">=</span><span class="n">v</span>
<div class="viewcode-block" id="SpaseAddr.is_valid"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseAddr.is_valid">[docs]</a>  <span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if the current object is a valid address</span>
<span class="sd">    :return: True is the current object is a valid SPASE address, False otherwise</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">SPASE_ADDR_PREFIX</span><span class="p">)</span></div>
  <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">repository_root</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;String representation of the current object</span>
<span class="sd">    </span>
<span class="sd">    :param repository_root: path to the root of the SPASE repository, optional</span>
<span class="sd">    :type repository_root: str</span>
<span class="sd">    :return: string representation of the current object</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">repository_root</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="bp">self</span>
    <span class="c1">## check if the associated path exists of not</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">SpaseManager</span><span class="o">.</span><span class="n">resource_id_to_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">repository_root</span><span class="p">)):</span>
      <span class="k">return</span> <span class="n">strcol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">strcol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SpaseResource"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseResource">[docs]</a><span class="k">class</span> <span class="nc">SpaseResource</span><span class="p">:</span>
  <span class="sd">&quot;&quot;&quot;Base class for representing SPASE resources</span>

<span class="sd">  :param filename: path to the resource file</span>
<span class="sd">  :type filename: str</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="c1">## path to XML file.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="o">=</span><span class="n">filename</span>               
    <span class="c1">## XML content.</span>
    <span class="n">parser</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">XMLParser</span><span class="p">(</span><span class="n">remove_blank_text</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="n">parser</span><span class="p">)</span>      
    <span class="c1">## XML namespace mapping.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span><span class="o">.</span><span class="n">nsmap</span> 
    <span class="k">if</span> <span class="kc">None</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span>
      <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span>
<div class="viewcode-block" id="SpaseResource.is_spase_resource"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseResource.is_spase_resource">[docs]</a>  <span class="k">def</span> <span class="nf">is_spase_resource</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check that the current object is compatible with the SPASE XML scheme</span>

<span class="sd">    :return: True if current object is a valid spase resource, False otherwise</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">SPASE_TAG</span><span class="p">)</span></div>
<div class="viewcode-block" id="SpaseResource.valid"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseResource.valid">[docs]</a>  <span class="k">def</span> <span class="nf">valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check that the current object is valid</span>

<span class="sd">    :return: True if the current object is a valid SPASE resource object</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">root_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;/abc:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SPASE_TAG</span><span class="p">),</span><span class="n">namespaces</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">root_el</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span></div>
<div class="viewcode-block" id="SpaseResource.resource_type"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseResource.resource_type">[docs]</a>  <span class="k">def</span> <span class="nf">resource_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get resource type</span>

<span class="sd">    :return: Resource type</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="n">NUMERICALDATA_TAG</span><span class="p">,</span><span class="n">INSTRUMENT_TAG</span><span class="p">,</span><span class="n">OBSERVATORY_TAG</span><span class="p">,</span><span class="n">PERSON_TAG</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">:</span>
      <span class="n">ts</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;/abc:</span><span class="si">{}</span><span class="s2">/abc:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SPASE_TAG</span><span class="p">,</span><span class="n">t</span><span class="p">),</span><span class="n">namespaces</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">)</span>
      <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">t</span>
    <span class="k">return</span> <span class="kc">None</span></div>
<div class="viewcode-block" id="SpaseResource.resource_id"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseResource.resource_id">[docs]</a>  <span class="k">def</span> <span class="nf">resource_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get resource id</span>

<span class="sd">    :return: resource id</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;/abc:</span><span class="si">{}</span><span class="s2">/*/abc:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SPASE_TAG</span><span class="p">,</span><span class="n">RESOURCEID_TAG</span><span class="p">),</span> <span class="n">namespaces</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span></div>
<div class="viewcode-block" id="SpaseResource.set_resource_id"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseResource.set_resource_id">[docs]</a>  <span class="k">def</span> <span class="nf">set_resource_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set resource id</span>

<span class="sd">    :param rid: resource id value</span>
<span class="sd">    :type rid: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;/abc:</span><span class="si">{}</span><span class="s2">/*/abc:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SPASE_TAG</span><span class="p">,</span><span class="n">RESOURCEID_TAG</span><span class="p">),</span> <span class="n">namespaces</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">rid</span></div>
<div class="viewcode-block" id="SpaseResource.write"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseResource.write">[docs]</a>  <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Save resource to file</span>
<span class="sd">    </span>
<span class="sd">    :param filename: filename</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">xml_declaration</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">pretty_print</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
<div class="viewcode-block" id="SpaseResource.is_type"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseResource.is_type">[docs]</a>  <span class="k">def</span> <span class="nf">is_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rtype</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if object is of type :data:`rtype`</span>

<span class="sd">    :param rtype: desired type</span>
<span class="sd">    :type rtype: str</span>
<span class="sd">    :return: True if current object is of type :data:`rtype`, False otherwise</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">p</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;/abc:</span><span class="si">{}</span><span class="s2">/abc:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SPASE_TAG</span><span class="p">,</span><span class="n">rtype</span><span class="p">),</span><span class="n">namespaces</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
      <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span></div>
<div class="viewcode-block" id="SpaseResource.expected_filename"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseResource.expected_filename">[docs]</a>  <span class="k">def</span> <span class="nf">expected_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">repository_root</span><span class="o">=</span><span class="n">DEFAULT_REPOSITORY_ROOT</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the expected filename base on current objects resource id and repository root</span>
<span class="sd">    </span>
<span class="sd">    :param repository_root: path to the root directory of the SPASE resource repository, optional</span>
<span class="sd">    :type repository_root: str</span>
<span class="sd">    :return: expected filename</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">SpaseManager</span><span class="o">.</span><span class="n">resource_id_to_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="p">(),</span> <span class="n">repository_root</span><span class="p">)</span></div>
<div class="viewcode-block" id="SpaseResource.iter_dependency"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseResource.iter_dependency">[docs]</a>  <span class="k">def</span> <span class="nf">iter_dependency</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Iterate over dependencies of the current object</span>

<span class="sd">    :return: SPASE address object </span>
<span class="sd">    :rtype: amdapy.spase.SpaseAddr</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">res_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
      <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">etree</span><span class="o">.</span><span class="n">_Element</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">etree</span><span class="o">.</span><span class="n">_Comment</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">REPOSITORYID_TAG</span><span class="p">):</span>
          <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">e</span><span class="o">.</span><span class="n">text</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
          <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">SPASE_ADDR_PREFIX</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">text</span><span class="o">!=</span><span class="n">res_id</span><span class="p">:</span>
              <span class="n">addr</span><span class="o">=</span><span class="n">SpaseAddr</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
              <span class="k">if</span> <span class="n">addr</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
                <span class="k">yield</span> <span class="n">addr</span></div>
<div class="viewcode-block" id="SpaseResource.iter_contact"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseResource.iter_contact">[docs]</a>  <span class="k">def</span> <span class="nf">iter_contact</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Iterate over contact information</span>

<span class="sd">    :return: Contact information</span>
<span class="sd">    :rtype: amdapy.spase.SpaseContact</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">CONTACT_TAG</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">Contact</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>
<div class="viewcode-block" id="SpaseResource.dirty_find"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseResource.dirty_find">[docs]</a>  <span class="k">def</span> <span class="nf">dirty_find</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Temporary : find tag , ugly, ugly, ugly</span>

<span class="sd">    :param tag: tag we are looking for</span>
<span class="sd">    :type tag: str</span>
<span class="sd">    :return: First element with correponding tag</span>
<span class="sd">    :rtype: lxml.etree._Element</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">e</span></div></div>

<div class="viewcode-block" id="NumericalData"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData">[docs]</a><span class="k">class</span> <span class="nc">NumericalData</span><span class="p">(</span><span class="n">SpaseResource</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;SPASE NumericalData interface class</span>

<span class="sd">  :param file: path to the resource file</span>
<span class="sd">  :type file: str</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Object constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">NumericalData</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<div class="viewcode-block" id="NumericalData.iter_parameter"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.iter_parameter">[docs]</a>  <span class="k">def</span> <span class="nf">iter_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Iterate over Parameter objects</span>

<span class="sd">    :return: Parameter objects defined in the current NumericalData file</span>
<span class="sd">    :rtype: amdapy.spase.Parameter</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
      <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">etree</span><span class="o">.</span><span class="n">_Element</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">etree</span><span class="o">.</span><span class="n">_Comment</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;Parameter&quot;</span><span class="p">):</span>
          <span class="k">yield</span> <span class="n">Parameter</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></div>
<div class="viewcode-block" id="NumericalData.iter_contact"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.iter_contact">[docs]</a>  <span class="k">def</span> <span class="nf">iter_contact</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Iterate over contact information</span>

<span class="sd">    :return: contact information in the current NumericalData file</span>
<span class="sd">    :rtype: amdapy.spase.Contact</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
      <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">etree</span><span class="o">.</span><span class="n">_Element</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">etree</span><span class="o">.</span><span class="n">_Comment</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;Contact&quot;</span><span class="p">):</span>
          <span class="k">yield</span> <span class="n">Contact</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></div>
<div class="viewcode-block" id="NumericalData.parameter_count"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.parameter_count">[docs]</a>  <span class="k">def</span> <span class="nf">parameter_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Count number of parameters</span>

<span class="sd">    :return: number of parameters defined in the current NumericalData file</span>
<span class="sd">    :rtype: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_parameter</span><span class="p">()])</span></div>
<div class="viewcode-block" id="NumericalData.contact_count"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.contact_count">[docs]</a>  <span class="k">def</span> <span class="nf">contact_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Count contacts</span>

<span class="sd">    :return: number of contact object in the current object</span>
<span class="sd">    :rtype: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">([</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_contact</span><span class="p">()])</span></div>
<div class="viewcode-block" id="NumericalData.contains_parameter"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.contains_parameter">[docs]</a>  <span class="k">def</span> <span class="nf">contains_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">param_id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if the parameter :data:`param_id` exists</span>

<span class="sd">    :return: True if the current object contains the desired parameter, False otherwise</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_parameter</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">param_id</span><span class="o">==</span><span class="n">p</span><span class="o">.</span><span class="n">get_id</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span></div>
<div class="viewcode-block" id="NumericalData.check_resource_id"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.check_resource_id">[docs]</a>  <span class="k">def</span> <span class="nf">check_resource_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check the validity of a resource id</span>

<span class="sd">    :param rid: resource id value, optional, if None then check current objects resource id</span>
<span class="sd">    :type rid: str</span>
<span class="sd">    :return: True if :data:`rid` is a valid resource id</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">rid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">SPASE_ADDR_PREFIX</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">rid</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">SPASE_ADDR_PREFIX</span><span class="p">)</span></div>
<div class="viewcode-block" id="NumericalData.check_filename"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.check_filename">[docs]</a>  <span class="k">def</span> <span class="nf">check_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">repository_root</span><span class="o">=</span><span class="n">DEFAULT_REPOSITORY_ROOT</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check that the filename and the resource id correspond</span>

<span class="sd">    :param repository_root: root of the SPASE resource repository</span>
<span class="sd">    :type repository_root: str</span>
<span class="sd">    :return: check that the resource id and the current file path correspond</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># get the expected path of the resource with current resource id.</span>
    <span class="n">expected_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">expected_filename</span><span class="p">(</span><span class="n">repository_root</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">expected_path</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span></div>
<div class="viewcode-block" id="NumericalData.remove_parameter"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.remove_parameter">[docs]</a>  <span class="k">def</span> <span class="nf">remove_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove parameter</span>

<span class="sd">    :param i: index of the parameter</span>
<span class="sd">    :type i: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">:</span>
      <span class="k">return</span>
    <span class="k">if</span> <span class="n">i</span><span class="o">&gt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter_count</span><span class="p">():</span>
      <span class="k">return</span>
    <span class="n">el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;/abc:Spase/abc:NumericalData&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
      <span class="n">el</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_parameter</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">root</span><span class="p">)</span></div>
<div class="viewcode-block" id="NumericalData.parameter_str"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.parameter_str">[docs]</a>  <span class="k">def</span> <span class="nf">parameter_str</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_indent</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">repository_root</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get summary of parameters as string</span>

<span class="sd">    :param n_indent: number of indentation characters to insert at each line, optional</span>
<span class="sd">    :type n_indent: int</span>
<span class="sd">    :param repository_root: root directory of the SPASE resource repository</span>
<span class="sd">    :type repository_root: str</span>
<span class="sd">    :return: string representation of the current objects parameters</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">a</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">Parameters :</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n_indent</span><span class="o">*</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">c</span><span class="o">=</span><span class="mi">1</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_parameter</span><span class="p">():</span>
      <span class="n">a</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}{}{}</span><span class="s2">. </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="o">*</span><span class="p">(</span><span class="n">n_indent</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="n">c</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="fm">__str__</span><span class="p">())</span>
      <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">a</span></div>
<div class="viewcode-block" id="NumericalData.contact_str"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.contact_str">[docs]</a>  <span class="k">def</span> <span class="nf">contact_str</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_indent</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">repository_root</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get contact information string</span>

<span class="sd">    :param n_indent: number of indentation characters to insert at each line, optional, default is 0</span>
<span class="sd">    :type n_indent: int</span>
<span class="sd">    :param repository_root: root directory of the SPASE repository, optional</span>
<span class="sd">    :type repository_root: str</span>
<span class="sd">    :return: contact information string</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">a</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">Contact :</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n_indent</span><span class="o">*</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">c</span><span class="o">=</span><span class="mi">1</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_contact</span><span class="p">():</span>
      <span class="n">a</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}{}{}</span><span class="s2">. </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="o">*</span><span class="p">(</span><span class="n">n_indent</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="n">c</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="fm">__str__</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">repository_root</span><span class="p">))</span>
      <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">a</span></div>
<div class="viewcode-block" id="NumericalData.add_parameter"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.add_parameter">[docs]</a>  <span class="k">def</span> <span class="nf">add_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add parameter to the current object</span>

<span class="sd">    :param param: parameter object</span>
<span class="sd">    :type param: amdapy.spase.Parameter</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">e</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;/abc:Spase/abc:NumericalData&quot;</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">)</span>
    <span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">)</span></div>
  <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">repository_root</span><span class="o">=</span><span class="n">DEFAULT_REPOSITORY_ROOT</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;NumericalData object string representation</span>

<span class="sd">    :param repository_root: root of the SPASE resource repository, optional</span>
<span class="sd">    :type repository_root: str</span>
<span class="sd">    :return: string representation of the NumericalData object</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_resource_id</span><span class="p">():</span>
      <span class="n">res_id_col</span><span class="o">=</span><span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">res_id_col</span><span class="o">=</span><span class="n">Fore</span><span class="o">.</span><span class="n">RED</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_filename</span><span class="p">(</span><span class="n">repository_root</span><span class="o">=</span><span class="n">repository_root</span><span class="p">):</span>
      <span class="n">file_col</span><span class="o">=</span><span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span>
      <span class="n">file_info</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">file_col</span><span class="o">=</span><span class="n">Fore</span><span class="o">.</span><span class="n">RED</span>
      <span class="n">file_info</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}{}</span><span class="se">\n\t\t</span><span class="s2">expected filename : </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span>\
                                                 <span class="n">Style</span><span class="o">.</span><span class="n">RESET_ALL</span><span class="p">,</span>\
                                                 <span class="bp">self</span><span class="o">.</span><span class="n">expected_filename</span><span class="p">())</span>
    <span class="n">a</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;NumericalData</span>
<span class="s2">    </span><span class="se">\t</span><span class="s2">id               : </span><span class="si">{}</span><span class="s2"></span>
<span class="s2">    </span><span class="se">\t</span><span class="s2">file             : </span><span class="si">{}</span><span class="s2"></span>
<span class="s2">    </span><span class="se">\t</span><span class="s2">instrument id    : </span><span class="si">{}</span><span class="s2"></span>
<span class="s2">    </span><span class="se">\t</span><span class="s2">release date     : </span><span class="si">{}</span><span class="s2"></span>
<span class="s2">    </span><span class="se">\t</span><span class="s2">description      : </span><span class="si">{}</span><span class="s2"></span>
<span class="s2">    </span><span class="se">\t</span><span class="s2">measurement type : </span><span class="si">{}</span><span class="s2"></span>
<span class="s2">    </span><span class="se">\t</span><span class="s2">start date       : </span><span class="si">{}</span><span class="s2"></span>
<span class="s2">    </span><span class="se">\t</span><span class="s2">stop date        : </span><span class="si">{}</span><span class="s2"></span>
<span class="s2">    </span><span class="se">\t</span><span class="s2">cadence min      : </span><span class="si">{}</span><span class="s2"></span>
<span class="s2">    </span><span class="se">\t</span><span class="s2">cadence max      : </span><span class="si">{}</span><span class="s2"></span>
<span class="s2">    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">res_id_col</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="p">()</span><span class="o">+</span><span class="n">Style</span><span class="o">.</span><span class="n">RESET_ALL</span><span class="p">,</span>\
               <span class="n">file_col</span><span class="o">+</span><span class="n">file_info</span><span class="o">+</span><span class="n">Style</span><span class="o">.</span><span class="n">RESET_ALL</span><span class="p">,</span>\
               <span class="bp">self</span><span class="o">.</span><span class="n">get_instrument_id</span><span class="p">()</span><span class="o">.</span><span class="fm">__str__</span><span class="p">(</span><span class="n">repository_root</span><span class="p">),</span>\
               <span class="bp">self</span><span class="o">.</span><span class="n">get_release_date</span><span class="p">(),</span>\
               <span class="bp">self</span><span class="o">.</span><span class="n">get_description</span><span class="p">(),</span>\
               <span class="bp">self</span><span class="o">.</span><span class="n">get_measurement_type</span><span class="p">(),</span>\
               <span class="bp">self</span><span class="o">.</span><span class="n">get_start_date</span><span class="p">(),</span>\
               <span class="bp">self</span><span class="o">.</span><span class="n">get_stop_date</span><span class="p">(),</span>\
               <span class="bp">self</span><span class="o">.</span><span class="n">get_cadence_min</span><span class="p">(),</span>\
               <span class="bp">self</span><span class="o">.</span><span class="n">get_cadence_max</span><span class="p">())</span>
    <span class="c1">## Parameters</span>
    <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter_str</span><span class="p">(</span><span class="n">n_indent</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1">## Contacts</span>
    <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">contact_str</span><span class="p">(</span><span class="n">n_indent</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">repository_root</span><span class="o">=</span><span class="n">repository_root</span><span class="p">)</span>
    <span class="c1">## Dependencies</span>
    <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Dependencies :</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">c</span><span class="o">=</span><span class="mi">1</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_dependency</span><span class="p">():</span>
      <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\t\t</span><span class="si">{}</span><span class="s2">. </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="o">.</span><span class="fm">__str__</span><span class="p">(</span><span class="n">repository_root</span><span class="p">))</span>
      <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span>
    
    <span class="c1">## debugging</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_dependency</span><span class="p">():</span>
      <span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span>
<div class="viewcode-block" id="NumericalData.get_parameter"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.get_parameter">[docs]</a>  <span class="k">def</span> <span class="nf">get_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get parameter at position :data:`i`</span>

<span class="sd">    :param i: parameter index</span>
<span class="sd">    :type i: int</span>
<span class="sd">    :return: None if index out of bounds, Parameter object otherwise</span>
<span class="sd">    :rtype: amdapy.spase.Parameter</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">i</span><span class="o">&gt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter_count</span><span class="p">():</span>
      <span class="k">return</span> <span class="kc">None</span>
    <span class="n">c</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_parameter</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">c</span><span class="o">==</span><span class="n">i</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">p</span>
      <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span></div>
<div class="viewcode-block" id="NumericalData.get_contact"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.get_contact">[docs]</a>  <span class="k">def</span> <span class="nf">get_contact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get contact element</span>

<span class="sd">    :param i: index of the contact</span>
<span class="sd">    :type i: int</span>
<span class="sd">    :return: None if :data:`i` is out of bounds, Contact information otherwise</span>
<span class="sd">    :rtype: amdapy.spase.Contact</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">i</span><span class="o">&gt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">contact_count</span><span class="p">():</span>
      <span class="k">return</span> <span class="kc">None</span>
    <span class="n">c</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_contact</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">c</span><span class="o">==</span><span class="n">i</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">p</span>
      <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span></div>
<div class="viewcode-block" id="NumericalData.get_instrument_id"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.get_instrument_id">[docs]</a>  <span class="k">def</span> <span class="nf">get_instrument_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get instrument id curresponding to the current resource</span>

<span class="sd">    :return: instrument resource id</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;/abc:</span><span class="si">{}</span><span class="s2">/abc:</span><span class="si">{}</span><span class="s2">/abc:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SPASE_TAG</span><span class="p">,</span><span class="n">NUMERICALDATA_TAG</span><span class="p">,</span><span class="n">INSTRUMENTID_TAG</span><span class="p">),</span><span class="n">namespaces</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">SpaseAddr</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;More then one instrument id tag found&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">SpaseAddr</span><span class="p">(</span><span class="n">el</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">)</span></div>
<div class="viewcode-block" id="NumericalData.get_mission_id"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.get_mission_id">[docs]</a>  <span class="k">def</span> <span class="nf">get_mission_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get mission id corresponding to the current resource</span>

<span class="sd">    :return: mission resource id</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">None</span></div>
<div class="viewcode-block" id="NumericalData.add_contact"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.add_contact">[docs]</a>  <span class="k">def</span> <span class="nf">add_contact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contact_el</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add contact to current resource</span>

<span class="sd">    :param contact_el: contact information</span>
<span class="sd">    :type contact_el: amdapy.spase.Contact</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># find the ResourceHeader element</span>
    <span class="n">rh</span><span class="o">=</span><span class="kc">None</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;ResourceHeader&quot;</span><span class="p">):</span>
        <span class="n">rh</span><span class="o">=</span><span class="n">e</span>
    <span class="k">if</span> <span class="n">e</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span>
    <span class="n">rh</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">contact_el</span><span class="p">)</span></div>
<div class="viewcode-block" id="NumericalData.remove_contact"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.remove_contact">[docs]</a>  <span class="k">def</span> <span class="nf">remove_contact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove contact information from current resource</span>

<span class="sd">    :param i: contact information element index</span>
<span class="sd">    :type i: int</span>
<span class="sd">    :return: None on failure</span>
<span class="sd">    :rtype: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">:</span>
      <span class="k">return</span>
    <span class="k">if</span> <span class="n">i</span><span class="o">&gt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">contact_count</span><span class="p">():</span>
      <span class="k">return</span>
    <span class="n">el</span><span class="o">=</span><span class="kc">None</span> <span class="c1">#self.tree.xpath(&quot;abc:Spase/abc:NumericalData/abc:ResourceHeader&quot;,namespaces=self.nsmap)</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;ResourceHeader&quot;</span><span class="p">):</span>
        <span class="n">el</span><span class="o">=</span><span class="n">e</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">el</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="n">el</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_contact</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">root</span><span class="p">)</span></div>
<div class="viewcode-block" id="NumericalData.get_description"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.get_description">[docs]</a>  <span class="k">def</span> <span class="nf">get_description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get description of current object</span>

<span class="sd">    :return: object description string</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">desc_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dirty_find</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">desc_el</span><span class="o">.</span><span class="n">text</span></div>
<div class="viewcode-block" id="NumericalData.set_description"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.set_description">[docs]</a>  <span class="k">def</span> <span class="nf">set_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">description</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set description of current object</span>

<span class="sd">    :param description: object description</span>
<span class="sd">    :type description: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">desc_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dirty_find</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">)</span>
    <span class="n">desc_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">description</span></div>
<div class="viewcode-block" id="NumericalData.get_measurement_type"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.get_measurement_type">[docs]</a>  <span class="k">def</span> <span class="nf">get_measurement_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get Measurement type of current object</span>

<span class="sd">    :return: object MeasurementType value</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dirty_find</span><span class="p">(</span><span class="s2">&quot;MeasurementType&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span></div>
<div class="viewcode-block" id="NumericalData.set_measurement_type"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.set_measurement_type">[docs]</a>  <span class="k">def</span> <span class="nf">set_measurement_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set MeasurementType value of the current object</span>

<span class="sd">    :param value: value</span>
<span class="sd">    :type value: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dirty_find</span><span class="p">(</span><span class="s2">&quot;MeasurementType&quot;</span><span class="p">)</span>
    <span class="n">el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">value</span></div>
<div class="viewcode-block" id="NumericalData.get_start_date"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.get_start_date">[docs]</a>  <span class="k">def</span> <span class="nf">get_start_date</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get current object start date</span>

<span class="sd">    :return: current object start date</span>
<span class="sd">    :rtype: datetime.datetime</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sd_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dirty_find</span><span class="p">(</span><span class="s2">&quot;StartDate&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sd_el</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">sd_el</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">DATETIME_FORMAT</span><span class="p">)</span></div>
<div class="viewcode-block" id="NumericalData.set_start_date"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.set_start_date">[docs]</a>  <span class="k">def</span> <span class="nf">set_start_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set current object start date</span>

<span class="sd">    :param dt: start date</span>
<span class="sd">    :type dt: datetime.datetime</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sd_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dirty_find</span><span class="p">(</span><span class="s2">&quot;StartDate&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
      <span class="n">sd_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">DATETIME_FORMAT</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">sd_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">dt</span></div>
<div class="viewcode-block" id="NumericalData.get_stop_date"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.get_stop_date">[docs]</a>  <span class="k">def</span> <span class="nf">get_stop_date</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get current object stop date</span>

<span class="sd">    :return: stop</span>
<span class="sd">    :rtype: datetime.datetime</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sd_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dirty_find</span><span class="p">(</span><span class="s2">&quot;StopDate&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sd_el</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">sd_el</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">DATETIME_FORMAT</span><span class="p">)</span></div>
<div class="viewcode-block" id="NumericalData.set_stop_date"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.set_stop_date">[docs]</a>  <span class="k">def</span> <span class="nf">set_stop_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set current object stop date</span>

<span class="sd">    :param dt: stop date</span>
<span class="sd">    :type dt: datetime.datetime</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sd_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dirty_find</span><span class="p">(</span><span class="s2">&quot;StopDate&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
      <span class="n">sd_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">DATETIME_FORMAT</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">sd_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">dt</span></div>
<div class="viewcode-block" id="NumericalData.get_release_date"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.get_release_date">[docs]</a>  <span class="k">def</span> <span class="nf">get_release_date</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get current object release date</span>

<span class="sd">    :return: release date</span>
<span class="sd">    :rtype: datetime.datetime</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sd_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dirty_find</span><span class="p">(</span><span class="s2">&quot;ReleaseDate&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sd_el</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">sd_el</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">DATETIME_FORMAT</span><span class="p">)</span></div>
<div class="viewcode-block" id="NumericalData.set_release_date"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.set_release_date">[docs]</a>  <span class="k">def</span> <span class="nf">set_release_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set current object release date</span>

<span class="sd">    :param dt: release date</span>
<span class="sd">    :type dt: datetime.datetime</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sd_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dirty_find</span><span class="p">(</span><span class="s2">&quot;ReleaseDate&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
      <span class="n">sd_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">DATETIME_FORMAT</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">sd_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">dt</span></div>
<div class="viewcode-block" id="NumericalData.get_cadence_min"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.get_cadence_min">[docs]</a>  <span class="k">def</span> <span class="nf">get_cadence_min</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get cadence min value</span>

<span class="sd">    :return: cadence min value</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sd_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dirty_find</span><span class="p">(</span><span class="s2">&quot;CadenceMin&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sd_el</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">sd_el</span><span class="o">.</span><span class="n">text</span></div>
<div class="viewcode-block" id="NumericalData.set_cadence_min"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.set_cadence_min">[docs]</a>  <span class="k">def</span> <span class="nf">set_cadence_min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cadence</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set current object min cadence value</span>

<span class="sd">    :param cadence: cadence minimum value</span>
<span class="sd">    :type cadence: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sd_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dirty_find</span><span class="p">(</span><span class="s2">&quot;CadenceMin&quot;</span><span class="p">)</span>
    <span class="n">sd_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">cadence</span></div>
<div class="viewcode-block" id="NumericalData.get_cadence_max"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.get_cadence_max">[docs]</a>  <span class="k">def</span> <span class="nf">get_cadence_max</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get cadence maximum value</span>

<span class="sd">    :return: cadence max</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sd_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dirty_find</span><span class="p">(</span><span class="s2">&quot;CadenceMax&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sd_el</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">sd_el</span><span class="o">.</span><span class="n">text</span></div>
<div class="viewcode-block" id="NumericalData.set_cadence_max"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.set_cadence_max">[docs]</a>  <span class="k">def</span> <span class="nf">set_cadence_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cadence</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set cadence maximum value</span>

<span class="sd">    :param cadence: maximum cadence value</span>
<span class="sd">    :type cadence: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sd_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dirty_find</span><span class="p">(</span><span class="s2">&quot;CadenceMax&quot;</span><span class="p">)</span>
    <span class="n">sd_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">cadence</span></div>
<div class="viewcode-block" id="NumericalData.set_component_prefix"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.set_component_prefix">[docs]</a>  <span class="k">def</span> <span class="nf">set_component_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">prefix</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set component prefix </span>

<span class="sd">    :param i; index of the parameter</span>
<span class="sd">    :type i: int</span>
<span class="sd">    :param prefix: prefix value</span>
<span class="sd">    :type prefix: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># get the ith Parameter object</span>
    <span class="n">parameter</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_parameter</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">parameter</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">parameter</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">parameter</span><span class="o">.</span><span class="n">set_component_prefix</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span></div>
<div class="viewcode-block" id="NumericalData.set_component_suffix"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.NumericalData.set_component_suffix">[docs]</a>  <span class="k">def</span> <span class="nf">set_component_suffix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_id</span><span class="p">,</span> <span class="n">suffix</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set component suffix</span>

<span class="sd">    :param param_id: parameter id</span>
<span class="sd">    :type param_id: str</span>
<span class="sd">    :param suffix: suffix value</span>
<span class="sd">    :type suffix: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># get the ith parameter</span>
    <span class="n">parameter</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_parameter</span><span class="p">(</span><span class="n">param_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">parameter</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">parameter</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">parameter</span><span class="o">.</span><span class="n">set_component_suffix</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span></div></div>
    
<div class="viewcode-block" id="Instrument"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Instrument">[docs]</a><span class="k">class</span> <span class="nc">Instrument</span><span class="p">(</span><span class="n">SpaseResource</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Class for representing and modifying SPASE Instrument resources</span>

<span class="sd">  :param file: path to the resource file</span>
<span class="sd">  :type file: str</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Object constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Instrument</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">file</span><span class="p">)</span></div>

<div class="viewcode-block" id="Observatory"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Observatory">[docs]</a><span class="k">class</span> <span class="nc">Observatory</span><span class="p">(</span><span class="n">SpaseResource</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Class for representing and modifying SPASE Observatory resources</span>

<span class="sd">  :param file: path to the resource file</span>
<span class="sd">  :type file: str</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Object constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Observatory</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">file</span><span class="p">)</span></div>

<div class="viewcode-block" id="Person"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Person">[docs]</a><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">SpaseResource</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Class for representing SPASE Person resource</span>

<span class="sd">  :param file: path to the resource file</span>
<span class="sd">  :type file: str</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Object constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">file</span><span class="p">)</span></div>

<div class="viewcode-block" id="XMLElement"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.XMLElement">[docs]</a><span class="k">class</span> <span class="nc">XMLElement</span><span class="p">:</span>
  <span class="sd">&quot;&quot;&quot;Class for representing an XML element</span>

<span class="sd">  :param element: root element of the object</span>
<span class="sd">  :type element: lxml.etree._Element</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Object constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">## root XML element.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">=</span><span class="n">element</span>
    <span class="c1">## XML namespace mapping.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="o">=</span><span class="n">element</span><span class="o">.</span><span class="n">nsmap</span>
    <span class="k">if</span> <span class="kc">None</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span>
      <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span>
<div class="viewcode-block" id="XMLElement.find"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.XMLElement.find">[docs]</a>  <span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Find element by tag</span>

<span class="sd">    :param tag: tag of the desired element</span>
<span class="sd">    :type tag: str</span>
<span class="sd">    :return: element object if found, None otherwise</span>
<span class="sd">    :rtype: lxml.etree._Element or None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
      <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span><span class="n">etree</span><span class="o">.</span><span class="n">_Comment</span><span class="p">):</span>
        <span class="k">continue</span>
      <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">e</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;abc:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tag</span><span class="p">),</span><span class="n">namespaces</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nsmap</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="Element"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Element">[docs]</a><span class="k">class</span> <span class="nc">Element</span><span class="p">(</span><span class="n">XMLElement</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Class represent Element tags in multidimensional timeseries SPASE parameters</span>

<span class="sd">  :param el: xml element </span>
<span class="sd">  :type el: lxml.etree._Element</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">el</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Object constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Element</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
    <span class="c1">## Name of the Element</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
    <span class="c1">## Key of the Element</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_key</span><span class="p">()</span>
    <span class="c1">## Index of the Element</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_index</span><span class="p">()</span>
<div class="viewcode-block" id="Element.get_name"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Element.get_name">[docs]</a>  <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get element name</span>

<span class="sd">    :return: element name</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">NAME_TAG</span><span class="p">)</span><span class="o">.</span><span class="n">text</span></div>
<div class="viewcode-block" id="Element.set_name"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Element.set_name">[docs]</a>  <span class="k">def</span> <span class="nf">set_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set element name</span>

<span class="sd">    :param name: name</span>
<span class="sd">    :type name: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">name_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">NAME_TAG</span><span class="p">)</span>
    <span class="n">name_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">name</span></div>
<div class="viewcode-block" id="Element.get_index"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Element.get_index">[docs]</a>  <span class="k">def</span> <span class="nf">get_index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get element index</span>

<span class="sd">    :return: element index</span>
<span class="sd">    :rtype: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">INDEX_TAG</span><span class="p">)</span><span class="o">.</span><span class="n">text</span></div>
<div class="viewcode-block" id="Element.get_key"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Element.get_key">[docs]</a>  <span class="k">def</span> <span class="nf">get_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get element key</span>

<span class="sd">    :return: key</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">PARAMETERKEY_TAG</span><span class="p">)</span><span class="o">.</span><span class="n">text</span></div>
  <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_indent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Element string representation</span>

<span class="sd">    :param n_indent: number of indentation characters to insert at each line</span>
<span class="sd">    :type n_indent: int</span>
<span class="sd">    :return: object string representation</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">Component(key:</span><span class="si">{}</span><span class="s2">,name:</span><span class="si">{}</span><span class="s2">,i:</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n_indent</span><span class="o">*</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">)</span></div>

  
<div class="viewcode-block" id="Contact"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Contact">[docs]</a><span class="k">class</span> <span class="nc">Contact</span><span class="p">(</span><span class="n">XMLElement</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Class for representing SPASE Contact resources</span>

<span class="sd">  :param element: xml element from which contact is defined</span>
<span class="sd">  :type element: lxml.etree._Element</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Object constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Contact</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_indent</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">repository_root</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Contact string representation</span>

<span class="sd">    :param n_indent: number of indentation characters to insert a each line</span>
<span class="sd">    :type n_indent: int</span>
<span class="sd">    :param repository_root: root path of the SPASE repository</span>
<span class="sd">    :type repository_root: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">repository_root</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">Contact(id:</span><span class="si">{}</span><span class="s2">,role:</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n_indent</span><span class="o">*</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">person_id</span><span class="p">(),</span><span class="bp">self</span><span class="o">.</span><span class="n">role</span><span class="p">())</span>
    <span class="n">person_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">person_id</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">person_id</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
      <span class="k">return</span> <span class="n">strcol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">(</span><span class="n">n_indent</span><span class="o">=</span><span class="n">n_indent</span><span class="p">),</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
    <span class="n">person_path</span><span class="o">=</span><span class="n">SpaseManager</span><span class="o">.</span><span class="n">resource_id_to_path</span><span class="p">(</span><span class="n">person_id</span><span class="p">,</span><span class="n">repository_root</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">person_path</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">strcol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">(</span><span class="n">n_indent</span><span class="o">=</span><span class="n">n_indent</span><span class="p">),</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">strcol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">(</span><span class="n">n_indent</span><span class="o">=</span><span class="n">n_indent</span><span class="p">),</span><span class="s2">&quot;g&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="Contact.person_id"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Contact.person_id">[docs]</a>  <span class="k">def</span> <span class="nf">person_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get person id</span>

<span class="sd">    :return: Person id value</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">SpaseAddr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">PERSONID_TAG</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span></div>
<div class="viewcode-block" id="Contact.role"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Contact.role">[docs]</a>  <span class="k">def</span> <span class="nf">role</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get person role</span>

<span class="sd">    :return: role</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">ROLE_TAG</span><span class="p">)</span><span class="o">.</span><span class="n">text</span></div>
<div class="viewcode-block" id="Contact.make_contact_xmlel"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Contact.make_contact_xmlel">[docs]</a>  <span class="k">def</span> <span class="nf">make_contact_xmlel</span><span class="p">(</span><span class="n">person_id</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;GeneralContact&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a Contact element</span>

<span class="sd">    :param person_id: person id</span>
<span class="sd">    :type person_id: str</span>
<span class="sd">    :param role: role</span>
<span class="sd">    :type role: str</span>
<span class="sd">    :return: Contact XML element</span>
<span class="sd">    :rtype: lxml.etree._Element</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">contact_el</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Contact&quot;</span><span class="p">)</span>
    <span class="n">pid_el</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;PersonID&quot;</span><span class="p">)</span>
    <span class="n">pid_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">person_id</span>
    <span class="n">role_el</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Role&quot;</span><span class="p">)</span>
    <span class="n">role_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">role</span>
    <span class="n">contact_el</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pid_el</span><span class="p">)</span>
    <span class="n">contact_el</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">role_el</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">contact_el</span></div></div>

<div class="viewcode-block" id="Parameter"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter">[docs]</a><span class="k">class</span> <span class="nc">Parameter</span><span class="p">(</span><span class="n">XMLElement</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Class for representing parameters in the SPASE resource context</span>

<span class="sd">  :param parameter_element: parameter XML element</span>
<span class="sd">  :type parameter_element: lxml.etree._Element</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter_element</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Object constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Parameter</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parameter_element</span><span class="p">)</span>
<div class="viewcode-block" id="Parameter.get_id"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.get_id">[docs]</a>  <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get parameter id</span>

<span class="sd">    :return: parameter id</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">paramkey_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;ParameterKey&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">paramkey_el</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">paramkey_el</span><span class="o">.</span><span class="n">text</span>
    <span class="k">return</span> <span class="kc">None</span></div>
<div class="viewcode-block" id="Parameter.get_name"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.get_name">[docs]</a>  <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get parameter name</span>

<span class="sd">    :return: parameter name</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">paramname_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">paramname_el</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">paramname_el</span><span class="o">.</span><span class="n">text</span>
    <span class="k">return</span> <span class="kc">None</span></div>
<div class="viewcode-block" id="Parameter.get_ucd"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.get_ucd">[docs]</a>  <span class="k">def</span> <span class="nf">get_ucd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get ucd</span>

<span class="sd">    :return: UCD value</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;Ucd&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">el</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">el</span><span class="o">.</span><span class="n">text</span></div>
<div class="viewcode-block" id="Parameter.get_units"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.get_units">[docs]</a>  <span class="k">def</span> <span class="nf">get_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get units</span>

<span class="sd">    :return: units</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;Units&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">el</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">el</span><span class="o">.</span><span class="n">text</span>
    <span class="k">return</span> <span class="kc">None</span></div>
<div class="viewcode-block" id="Parameter.get_size"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.get_size">[docs]</a>  <span class="k">def</span> <span class="nf">get_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get size</span>

<span class="sd">    :return: parameter size</span>
<span class="sd">    :rtype: tuple ints</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">el</span><span class="o">=</span><span class="kc">None</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
      <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">etree</span><span class="o">.</span><span class="n">_Comment</span><span class="p">):</span>
        <span class="k">continue</span>
      <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;Structure&quot;</span><span class="p">):</span>
        <span class="n">el</span><span class="o">=</span><span class="n">e</span>
    <span class="c1">#el=self.root.find(&quot;abc:Structure&quot;, namespaces=self.nsmap)</span>
    <span class="k">if</span> <span class="n">el</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="mi">1</span>
    <span class="n">size_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;Size&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">size_el</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">size_el</span><span class="o">.</span><span class="n">text</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="mi">0</span>
    <span class="n">v</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">try</span><span class="p">:</span>
      <span class="n">v</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">size_el</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">v</span>
    <span class="k">except</span><span class="p">:</span>
      <span class="k">return</span> <span class="mi">0</span></div>
<div class="viewcode-block" id="Parameter.valid"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.valid">[docs]</a>  <span class="k">def</span> <span class="nf">valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if parameter definition is valid</span>

<span class="sd">    :return: True is current parameter definition is valid, False otherwise</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
      <span class="k">return</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_elements</span><span class="p">()</span><span class="o">!=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">False</span>
      <span class="n">indexes</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">()))</span>
      <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_component</span><span class="p">():</span>
        <span class="n">name</span><span class="o">=</span><span class="n">e</span><span class="o">.</span><span class="n">name</span> <span class="c1">#e.find(&quot;abc:Name&quot;,namespaces=self.nsmap).text</span>
        <span class="n">index</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="c1">#e.find(&quot;abc:Index&quot;, namespaces=self.nsmap).text)</span>
        <span class="n">key</span><span class="o">=</span><span class="n">e</span><span class="o">.</span><span class="n">key</span> <span class="c1"># .find(&quot;abc:ParameterKey&quot;, namespaces=self.nsmap).text</span>
        <span class="n">expected_key</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">(),</span> <span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="n">expected_key</span><span class="p">:</span>
          <span class="n">indexes</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
      <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">indexes</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span>
    <span class="k">return</span> <span class="kc">False</span></div>
<div class="viewcode-block" id="Parameter.iter_component"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.iter_component">[docs]</a>  <span class="k">def</span> <span class="nf">iter_component</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Iterate over components</span>

<span class="sd">    :return: components</span>
<span class="sd">    :rtype: amdapy.spase.Element</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
      <span class="n">struct_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">STRUCTURE_TAG</span><span class="p">)</span>
      <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">struct_el</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">etree</span><span class="o">.</span><span class="n">_Comment</span><span class="p">):</span>
          <span class="k">continue</span>
        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">ELEMENT_TAG</span><span class="p">):</span>
          <span class="k">yield</span> <span class="n">Element</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>
<div class="viewcode-block" id="Parameter.component"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.component">[docs]</a>  <span class="k">def</span> <span class="nf">component</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get component by index</span>

<span class="sd">    :param i: component index</span>
<span class="sd">    :type i: int</span>
<span class="sd">    :return: i-th component</span>
<span class="sd">    :rtype: amdapy.spase.Element</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">i</span><span class="o">&gt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">():</span>
      <span class="k">return</span> <span class="kc">None</span>
    <span class="n">struct_el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">STRUCTURE_TAG</span><span class="p">)</span>
    <span class="n">c</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">struct_el</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
      <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">etree</span><span class="o">.</span><span class="n">_Comment</span><span class="p">):</span>
        <span class="k">continue</span>
      <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">ELEMENT_TAG</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">c</span><span class="o">==</span><span class="n">i</span><span class="p">:</span>
          <span class="k">return</span> <span class="n">Element</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span></div>
<div class="viewcode-block" id="Parameter.component_name"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.component_name">[docs]</a>  <span class="k">def</span> <span class="nf">component_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get i-th components name</span>

<span class="sd">    :param i: component index</span>
<span class="sd">    :type i: int</span>
<span class="sd">    :return: i-th component name</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">i</span><span class="o">&gt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">():</span>
      <span class="k">return</span> <span class="kc">None</span>
    <span class="n">el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">el</span><span class="o">.</span><span class="n">name</span></div>
  <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">n_indent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Parameter string representation</span>

<span class="sd">    :param n_indent: number of indentation characters inserted at each line</span>
<span class="sd">    :type n_indent: int</span>
<span class="sd">    :return: parameters string representation</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
      <span class="n">s</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">Parameter(key:</span><span class="si">{}</span><span class="s2">,name:</span><span class="si">{}</span><span class="s2">,size:</span><span class="si">{}</span><span class="s2">,disp_type:</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n_indent</span><span class="o">*</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>\
                                                                <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">(),</span>\
                                                                <span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span>\
                                                                <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">(),</span>\
                                                                <span class="bp">self</span><span class="o">.</span><span class="n">get_display_type</span><span class="p">())</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">Parameter(key:</span><span class="si">{}</span><span class="s2">,name:</span><span class="si">{}</span><span class="s2">,size:</span><span class="si">{}</span><span class="s2">,disp_type:</span><span class="si">{}</span><span class="s2">,cprefix:</span><span class="si">{}</span><span class="s2">,cscheme:</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n_indent</span><span class="o">*</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>\
                                                                <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">(),</span>\
                                                                <span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span>\
                                                                <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">(),</span>\
                                                                <span class="bp">self</span><span class="o">.</span><span class="n">get_display_type</span><span class="p">(),</span>\
                                                                <span class="bp">self</span><span class="o">.</span><span class="n">get_component_prefix</span><span class="p">(),</span>\
                                                                <span class="bp">self</span><span class="o">.</span><span class="n">get_component_suffix</span><span class="p">())</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
      <span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
      <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">()):</span>
        <span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="o">+</span><span class="s2">&quot;</span><span class="si">{}{}</span><span class="s2">. </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">((</span><span class="n">n_indent</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid</span><span class="p">():</span>
      <span class="k">return</span> <span class="n">strcol</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="s2">&quot;g&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">strcol</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="Parameter.get_component_prefix"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.get_component_prefix">[docs]</a>  <span class="k">def</span> <span class="nf">get_component_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get component prefix</span>

<span class="sd">    :return: component prefix</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#print(&quot;in Parameter.get_component_prefix : self.size={}&quot;.format(self.get_size()))</span>
    <span class="c1">#print(&quot;self.component_count/count_element : {}&quot;.format(self.count_elements()))</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
      <span class="k">return</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_elements</span><span class="p">()</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
      <span class="k">return</span> <span class="kc">None</span>
    <span class="c1"># iterate over components.</span>
    <span class="n">component_names</span><span class="o">=</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_component</span><span class="p">()]</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_similar_prefix</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">component_names</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">))</span></div>
<div class="viewcode-block" id="Parameter.set_component_prefix"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.set_component_prefix">[docs]</a>  <span class="k">def</span> <span class="nf">set_component_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set component prefix</span>

<span class="sd">    :param prefix: prefix</span>
<span class="sd">    :type prefix: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span><span class="o">!=</span><span class="mi">1</span><span class="p">:</span>
      <span class="c1"># get the current prefix value</span>
      <span class="n">old_prefix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_component_prefix</span><span class="p">()</span>
      <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">old_prefix</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_component</span><span class="p">():</span>
          <span class="c1"># get component name</span>
          <span class="n">cname</span><span class="o">=</span><span class="n">component</span><span class="o">.</span><span class="n">name</span>
          <span class="n">newcname</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span><span class="n">cname</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">old_prefix</span><span class="p">):])</span>
          <span class="n">component</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span><span class="n">newcname</span><span class="p">)</span></div>
<div class="viewcode-block" id="Parameter.get_component_suffix"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.get_component_suffix">[docs]</a>  <span class="k">def</span> <span class="nf">get_component_suffix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get component suffix</span>

<span class="sd">    :return: component suffix</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
      <span class="k">return</span> <span class="s2">&quot;&quot;</span>
    <span class="c1"># first try to determine the parameter components prefix</span>
    <span class="n">prefix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_component_prefix</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">prefix</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
      <span class="n">a</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
      <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_component</span><span class="p">():</span>
        <span class="n">a</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">))</span>
      <span class="k">return</span> <span class="n">a</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="c1"># no component prefix could be found.</span>
      <span class="k">return</span> <span class="s2">&quot;&quot;</span></div>
<div class="viewcode-block" id="Parameter.set_component_suffix"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.set_component_suffix">[docs]</a>  <span class="k">def</span> <span class="nf">set_component_suffix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">scheme</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set component suffix</span>

<span class="sd">    :param scheme: suffix scheme</span>
<span class="sd">    :type scheme: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># first get the prefix</span>
    <span class="n">prefix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_component_prefix</span><span class="p">()</span>
    <span class="c1"># if the new scheme length is smaller then the number of components then do nothing</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">scheme</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">():</span>
      <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Scheme is to short. leaving.&quot;</span><span class="p">)</span>
      <span class="nb">input</span><span class="p">()</span>
      <span class="k">return</span>
    <span class="n">i</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_component</span><span class="p">():</span>
      <span class="n">c</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span><span class="n">scheme</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
      <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span></div>
<div class="viewcode-block" id="Parameter.get_similar_prefix"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.get_similar_prefix">[docs]</a>  <span class="k">def</span> <span class="nf">get_similar_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name_list</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get similar prefix : this function is temporary and should be changes</span>

<span class="sd">    :param name_list: list of parameter names</span>
<span class="sd">    :type name_list: list of str</span>
<span class="sd">    :param n: ?? number of parameters</span>
<span class="sd">    :param n: int</span>
<span class="sd">    :return: similar prefix</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#print(&quot;in Parameter.get_similar_prefix : name_list={}, n={}&quot;.format(name_list, n))</span>
    <span class="c1">#print(&quot;self.size : {}&quot;.format(self.get_size()))</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name_list</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
      <span class="n">name_list</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">name_list</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
      <span class="k">return</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">n</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="n">size_list</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">name_list</span><span class="p">])</span>
      <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">size_list</span> <span class="o">==</span> <span class="n">size_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="c1"># all names are the same size</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_similar_prefix</span><span class="p">(</span><span class="n">name_list</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="n">size_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="n">min_size</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">size_list</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_similar_prefix</span><span class="p">([</span><span class="n">name</span><span class="p">[:</span><span class="n">min_size</span><span class="p">]</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">name_list</span><span class="p">],</span> <span class="n">min_size</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">n_l</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">name</span><span class="p">[:</span><span class="n">n</span><span class="p">]</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">name_list</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">n_l</span> <span class="o">==</span> <span class="n">n_l</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="k">return</span> <span class="n">n_l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_similar_prefix</span><span class="p">([</span><span class="n">name</span><span class="p">[:</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">name_list</span><span class="p">],</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span></div>
<div class="viewcode-block" id="Parameter.count_elements"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.count_elements">[docs]</a>  <span class="k">def</span> <span class="nf">count_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get element count</span>

<span class="sd">    :return: element count</span>
<span class="sd">    :rtype: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">c</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
      <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">etree</span><span class="o">.</span><span class="n">_Comment</span><span class="p">):</span>
        <span class="k">continue</span>
      <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;Element&quot;</span><span class="p">):</span>
        <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">c</span></div>
<div class="viewcode-block" id="Parameter.numericaldata_empty__str__"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.numericaldata_empty__str__">[docs]</a>  <span class="k">def</span> <span class="nf">numericaldata_empty__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Numerical data empty string</span>

<span class="sd">    :return: numerical data empty string ??</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid</span><span class="p">():</span>
      <span class="k">return</span> <span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span><span class="o">+</span><span class="s2">&quot;Parameter (id:</span><span class="si">{}</span><span class="s2">, name:</span><span class="si">{}</span><span class="s2">, units:</span><span class="si">{}</span><span class="s2">, size:</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span><span class="bp">self</span><span class="o">.</span><span class="n">get_units</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">())</span><span class="o">+</span><span class="n">Style</span><span class="o">.</span><span class="n">RESET_ALL</span>
    <span class="k">return</span> <span class="n">Fore</span><span class="o">.</span><span class="n">RED</span><span class="o">+</span><span class="s2">&quot;Parameter (id:</span><span class="si">{}</span><span class="s2">, name:</span><span class="si">{}</span><span class="s2">, units:</span><span class="si">{}</span><span class="s2">, size:</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span><span class="bp">self</span><span class="o">.</span><span class="n">get_units</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">())</span><span class="o">+</span><span class="n">Style</span><span class="o">.</span><span class="n">RESET_ALL</span></div>
<div class="viewcode-block" id="Parameter.make_parameter_xmlel"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.make_parameter_xmlel">[docs]</a>  <span class="nd">@staticmethod</span>
  <span class="k">def</span> <span class="nf">make_parameter_xmlel</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">component_prefix</span><span class="o">=</span><span class="s2">&quot;u&quot;</span><span class="p">,</span> <span class="n">rhint</span><span class="o">=</span><span class="s2">&quot;TimeSeries&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a parameter XML element</span>

<span class="sd">    :param name: name of the parameter</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param key: parameter key</span>
<span class="sd">    :type key: str</span>
<span class="sd">    :param size: size of the parameter</span>
<span class="sd">    :type size: int or tuple ints</span>
<span class="sd">    :param component_prefix: prefix to give to the components</span>
<span class="sd">    :type component_prefix: str</span>
<span class="sd">    :param rhint: display type</span>
<span class="sd">    :type rhint: str</span>
<span class="sd">    :return: parameter XML element</span>
<span class="sd">    :rtype: lxml.etree._Element</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;making parameter : name: </span><span class="si">{}</span><span class="s2">, key: </span><span class="si">{}</span><span class="s2">, size:</span><span class="si">{}</span><span class="s2">, component_prefix:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span>\
                                                                                      <span class="n">key</span><span class="p">,</span>\
                                                                                      <span class="n">size</span><span class="p">,</span>\
                                                                                      <span class="n">component_prefix</span><span class="p">,</span>\
                                                                                      <span class="n">rhint</span><span class="p">))</span>
    <span class="n">p_el</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Parameter&quot;</span><span class="p">)</span>
    <span class="n">name_el</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">)</span>
    <span class="n">name_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">name</span>
    <span class="n">param_key_el</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;ParameterKey&quot;</span><span class="p">)</span>
    <span class="n">param_key_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">key</span>
    <span class="n">ucd_el</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Ucd&quot;</span><span class="p">)</span>
    <span class="n">units_el</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Units&quot;</span><span class="p">)</span>
    <span class="n">rendh_el</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;RenderingHints&quot;</span><span class="p">)</span>
    <span class="n">disp_el</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;DisplayType&quot;</span><span class="p">)</span>
    <span class="n">disp_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">rhint</span>
    <span class="n">rendh_el</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">disp_el</span><span class="p">)</span>
    <span class="n">p_el</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name_el</span><span class="p">)</span>
    <span class="n">p_el</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">param_key_el</span><span class="p">)</span>
    <span class="n">p_el</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ucd_el</span><span class="p">)</span>
    <span class="n">p_el</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">units_el</span><span class="p">)</span>
    <span class="n">p_el</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rendh_el</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">size</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
      <span class="n">struct_el</span><span class="o">=</span><span class="n">Parameter</span><span class="o">.</span><span class="n">make_structure_xmlel</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">name_prefix</span><span class="o">=</span><span class="s2">&quot;u&quot;</span><span class="p">,</span> <span class="n">parameter_key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
      <span class="n">p_el</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">struct_el</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">p_el</span></div>
<div class="viewcode-block" id="Parameter.make_structure_xmlel"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.make_structure_xmlel">[docs]</a>  <span class="nd">@staticmethod</span>
  <span class="k">def</span> <span class="nf">make_structure_xmlel</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">name_prefix</span><span class="o">=</span><span class="s2">&quot;u&quot;</span><span class="p">,</span> <span class="n">parameter_key</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make structure XML element</span>

<span class="sd">    :param size: size</span>
<span class="sd">    :type size: int</span>
<span class="sd">    :param name_prefix: component name prefix</span>
<span class="sd">    :type name_prefix: str</span>
<span class="sd">    :param parameter_key: parameter key</span>
<span class="sd">    :type parameter_key: str</span>
<span class="sd">    :return: component element</span>
<span class="sd">    :rtype: lxml.etree._Element</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">s</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Structure&quot;</span><span class="p">)</span>
    <span class="n">size_el</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Size&quot;</span><span class="p">)</span>
    <span class="n">size_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">size_el</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
      <span class="n">el</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Element&quot;</span><span class="p">)</span>
      <span class="n">name_el</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">)</span>
      <span class="n">name_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">name_prefix</span><span class="o">+</span><span class="s2">&quot;xyzabc&quot;</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
      <span class="n">index_el</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;Index&quot;</span><span class="p">)</span>
      <span class="n">index_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
      <span class="n">pk_el</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;ParameterKey&quot;</span><span class="p">)</span>
      <span class="n">pk_el</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parameter_key</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>
      <span class="n">el</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name_el</span><span class="p">)</span>
      <span class="n">el</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index_el</span><span class="p">)</span>
      <span class="n">el</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pk_el</span><span class="p">)</span>

      <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">s</span></div>
<div class="viewcode-block" id="Parameter.get_display_type"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.get_display_type">[docs]</a>  <span class="k">def</span> <span class="nf">get_display_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get display type</span>

<span class="sd">    :return: parameter display type</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">e</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;DisplayType&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">e</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="n">text</span></div>
<div class="viewcode-block" id="Parameter.set_display_type"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.set_display_type">[docs]</a>  <span class="k">def</span> <span class="nf">set_display_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set display type</span>

<span class="sd">    :param value: display type value</span>
<span class="sd">    :type value: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">e</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;DisplayType&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">e</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="n">e</span><span class="o">.</span><span class="n">text</span><span class="o">=</span><span class="n">value</span></div>
<div class="viewcode-block" id="Parameter.has_coordinate_system"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.has_coordinate_system">[docs]</a>  <span class="k">def</span> <span class="nf">has_coordinate_system</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if parameter has a coordinate system</span>

<span class="sd">    :return: True if found a CoordinateSystem element, False otherwise</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">COORDINATESYSTEM_TAG</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">el</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span></div>
<div class="viewcode-block" id="Parameter.get_coordinate_system_name"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.Parameter.get_coordinate_system_name">[docs]</a>  <span class="k">def</span> <span class="nf">get_coordinate_system_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get coordinate system name</span>

<span class="sd">    :return: Coordinate system name</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">el</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">COORDINATESYSTEMNAME_TAG</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">el</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">el</span><span class="o">.</span><span class="n">text</span></div></div>

<div class="viewcode-block" id="SpaseManager"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseManager">[docs]</a><span class="k">class</span> <span class="nc">SpaseManager</span><span class="p">:</span>
  <span class="sd">&quot;&quot;&quot;Class for managing SPASE resources</span>

<span class="sd">  :param root: root of the repository</span>
<span class="sd">  :type root: str</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Object constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">## Root of the repository.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">=</span><span class="n">root</span>
<div class="viewcode-block" id="SpaseManager.iter_xml_file_path"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseManager.iter_xml_file_path">[docs]</a>  <span class="k">def</span> <span class="nf">iter_xml_file_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Iterate over all XML files under repository root directory</span>

<span class="sd">    :param path: path to walk, default is None and walks the default root directory</span>
<span class="sd">    :type path: str or None</span>
<span class="sd">    :return: path to XML files</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_xml_file_path</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">p</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">root</span><span class="p">,</span><span class="n">dirs</span><span class="p">,</span><span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
          <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.xml&quot;</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="n">f</span><span class="p">)</span></div>
<div class="viewcode-block" id="SpaseManager.iter_resource"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseManager.iter_resource">[docs]</a>  <span class="k">def</span> <span class="nf">iter_resource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rtype</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Iterate over SPASE resource files</span>

<span class="sd">    :param rtype: resource type</span>
<span class="sd">    :type rtype: str</span>
<span class="sd">    :return: resources</span>
<span class="sd">    :rtype: amda.spase.SpaseResource</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_xml_file_path</span><span class="p">():</span>
      <span class="n">res</span><span class="o">=</span><span class="kc">None</span>
      <span class="k">try</span><span class="p">:</span>
        <span class="n">res</span><span class="o">=</span><span class="n">SpaseResource</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
      <span class="k">except</span><span class="p">:</span>
        <span class="k">continue</span>
      <span class="c1"># check that the resource is a Spase object (unless we want to keep all xml files encountered</span>
      <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="o">.</span><span class="n">is_spase_resource</span><span class="p">():</span>
        <span class="k">continue</span>
      <span class="k">if</span> <span class="n">rtype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">res</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">is_type</span><span class="p">(</span><span class="n">rtype</span><span class="p">):</span>
          <span class="k">yield</span> <span class="n">res</span></div>
<div class="viewcode-block" id="SpaseManager.iter_numerical_data"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseManager.iter_numerical_data">[docs]</a>  <span class="k">def</span> <span class="nf">iter_numerical_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Iterate numerical data resources</span>

<span class="sd">    :return: NumercialData resouces</span>
<span class="sd">    :rtype: amdapy.spase.NumericalData</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_resource</span><span class="p">(</span><span class="n">rtype</span><span class="o">=</span><span class="n">NUMERICALDATA_TYPE</span><span class="p">):</span>
      <span class="k">yield</span> <span class="n">NumericalData</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span></div>
<div class="viewcode-block" id="SpaseManager.iter_instrument"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseManager.iter_instrument">[docs]</a>  <span class="k">def</span> <span class="nf">iter_instrument</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Iterate Instrument resources</span>

<span class="sd">    :return: Instrument resources</span>
<span class="sd">    :rtype: amdapy.spase.Instrument</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_resource</span><span class="p">(</span><span class="n">rtype</span><span class="o">=</span><span class="n">INSTRUMENT_TYPE</span><span class="p">):</span>
      <span class="k">yield</span> <span class="n">Instrument</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span></div>
<div class="viewcode-block" id="SpaseManager.iter_observatory"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseManager.iter_observatory">[docs]</a>  <span class="k">def</span> <span class="nf">iter_observatory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Iterate Observatory resources</span>

<span class="sd">    :return: Observatory resources</span>
<span class="sd">    :rtype: amdapy.spase.Observatory</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_resource</span><span class="p">(</span><span class="n">rtype</span><span class="o">=</span><span class="n">OBSERVATORY_TYPE</span><span class="p">):</span>
      <span class="k">yield</span> <span class="n">Observatory</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span></div>
<div class="viewcode-block" id="SpaseManager.iter_person"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseManager.iter_person">[docs]</a>  <span class="k">def</span> <span class="nf">iter_person</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Iterate Person resources</span>

<span class="sd">    :return: Person resources</span>
<span class="sd">    :rtype: amdapy.spase.Person</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_resource</span><span class="p">(</span><span class="n">rtype</span><span class="o">=</span><span class="n">PERSON_TYPE</span><span class="p">):</span>
      <span class="k">yield</span> <span class="n">Person</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span></div>
<div class="viewcode-block" id="SpaseManager.health_check"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseManager.health_check">[docs]</a>  <span class="k">def</span> <span class="nf">health_check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check the health of the repository</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">duplicated_ids</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_duplicate_ids</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">duplicated_ids</span><span class="p">):</span>
      <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Duplicates found : </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">duplicated_ids</span><span class="p">)))</span>
      <span class="c1">#print(duplicated_ids)</span>
      <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">duplicated_ids</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Duplicate : </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">dup</span> <span class="ow">in</span> <span class="n">duplicated_ids</span><span class="p">[</span><span class="n">d</span><span class="p">]:</span>
          <span class="n">path_corresponds_to_id</span><span class="o">=</span><span class="n">dup</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_id_to_path</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">repository_root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
          <span class="k">if</span> <span class="n">path_corresponds_to_id</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t\t</span><span class="si">{}</span><span class="s2"> orig&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dup</span><span class="p">))</span>
          <span class="k">else</span><span class="p">:</span>
            <span class="c1"># get the correct id for current file</span>
            <span class="n">correct_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">path_to_resource_id</span><span class="p">(</span><span class="n">dup</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t\t</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dup</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t\t\t</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">correct_id</span><span class="p">))</span>
            <span class="c1"># check if there are resources with the same id</span>
            <span class="n">res_l</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_resource_by_id</span><span class="p">(</span><span class="n">correct_id</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t\t\t</span><span class="s2">Resources with correct id : </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">res_l</span><span class="p">)))</span>
            <span class="c1"># check if the file corresponding to that id already exists</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_id_to_path</span><span class="p">(</span><span class="n">correct_id</span><span class="p">,</span> <span class="n">repository_root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)):</span>
              <span class="n">cmd</span><span class="o">=</span><span class="s2">&quot;diff </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_id_to_path</span><span class="p">(</span><span class="n">correct_id</span><span class="p">,</span><span class="n">repository_root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">),</span> <span class="n">dup</span><span class="p">)</span>
              <span class="nb">print</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
              <span class="n">r</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">check_output</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">))</span>
              <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span></div>
<div class="viewcode-block" id="SpaseManager.get_duplicate_ids"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseManager.get_duplicate_ids">[docs]</a>  <span class="k">def</span> <span class="nf">get_duplicate_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get list of resources with duplicated ids</span>

<span class="sd">    :return: dictionary indexed by resource id encountered more then once, and with values a list of files having the corresponding id.</span>
<span class="sd">    :rtype: dict</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">id_list</span><span class="o">=</span><span class="p">{}</span>
    <span class="n">duplicates</span><span class="o">=</span><span class="p">{}</span>
    <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_resource</span><span class="p">():</span>
      <span class="n">res_id</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">resource_id</span><span class="p">()</span>
      <span class="k">if</span> <span class="ow">not</span> <span class="n">res_id</span> <span class="ow">in</span> <span class="n">id_list</span><span class="p">:</span>
        <span class="n">id_list</span><span class="p">[</span><span class="n">res_id</span><span class="p">]</span><span class="o">=</span><span class="n">res</span><span class="o">.</span><span class="n">filename</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="c1"># the resource id has already been encountered</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">res_id</span> <span class="ow">in</span> <span class="n">duplicates</span><span class="p">:</span>
          <span class="n">duplicates</span><span class="p">[</span><span class="n">res_id</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="n">id_list</span><span class="p">[</span><span class="n">res_id</span><span class="p">],</span> <span class="n">res</span><span class="o">.</span><span class="n">filename</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
          <span class="n">duplicates</span><span class="p">[</span><span class="n">res_id</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">duplicates</span></div>
<div class="viewcode-block" id="SpaseManager.get_resource_by_id"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseManager.get_resource_by_id">[docs]</a>  <span class="k">def</span> <span class="nf">get_resource_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res_id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get a resource by id</span>
<span class="sd">    </span>
<span class="sd">    :param res_id: resource id</span>
<span class="sd">    :type res_id: str</span>
<span class="sd">    :return: list of resource objects with corresponding id</span>
<span class="sd">    :rtype: list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">a</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_resource</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">resource_id</span><span class="p">()</span><span class="o">==</span><span class="n">res_id</span><span class="p">:</span>
        <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span></div>
<div class="viewcode-block" id="SpaseManager.resource_id_to_path"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseManager.resource_id_to_path">[docs]</a>  <span class="nd">@staticmethod</span>
  <span class="k">def</span> <span class="nf">resource_id_to_path</span><span class="p">(</span><span class="n">res_id</span><span class="p">,</span> <span class="n">repository_root</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get absolute path of the spase resource file</span>

<span class="sd">    :param res_id: resource id</span>
<span class="sd">    :type res_id: str</span>
<span class="sd">    :param repository_root: root directory of the SPASE repository</span>
<span class="sd">    :type repository_root: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">t</span><span class="o">=</span><span class="n">res_id</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">SPASE_ADDR_PREFIX</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repository_root</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">.xml&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">t</span><span class="p">))</span></div>
<div class="viewcode-block" id="SpaseManager.path_to_resource_id"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseManager.path_to_resource_id">[docs]</a>  <span class="nd">@staticmethod</span>
  <span class="k">def</span> <span class="nf">path_to_resource_id</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">repository_root</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get resource id corresponding to a given path</span>

<span class="sd">    :param path: path</span>
<span class="sd">    :type path: str</span>
<span class="sd">    :param repository_root: repository root directory</span>
<span class="sd">    :type repository_root: str</span>
<span class="sd">    :return: resource id corresponding to :data:`path`</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">t</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">repository_root</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">):</span>
      <span class="n">t</span><span class="o">=</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SPASE_ADDR_PREFIX</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.xml&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">))</span></div>
<div class="viewcode-block" id="SpaseManager.get_bad_ids"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseManager.get_bad_ids">[docs]</a>  <span class="k">def</span> <span class="nf">get_bad_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check for all badly ided resources and return the list</span>

<span class="sd">    :return: list of pairs (path, id) </span>
<span class="sd">    :rtype: list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">a</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_resource</span><span class="p">():</span>
      <span class="n">path</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">filename</span>
      <span class="n">id_</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">resource_id</span><span class="p">()</span>
      <span class="n">id_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_id_to_path</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">path</span><span class="o">!=</span><span class="n">id_path</span><span class="p">:</span>
        <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">path</span><span class="p">,</span> <span class="n">id_</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">a</span></div>
<div class="viewcode-block" id="SpaseManager.find_resource"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.SpaseManager.find_resource">[docs]</a>  <span class="k">def</span> <span class="nf">find_resource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Find resource by filename</span>

<span class="sd">    :param name: name of the resource file</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :return: Spase resource if found None otherwise</span>
<span class="sd">    :rtype: amdapy.spase.SpaseResource</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cmd</span><span class="o">=</span><span class="s2">&quot;find </span><span class="si">{}</span><span class="s2">/ -type f -name &#39;*</span><span class="si">{}</span><span class="s2">.xml&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    <span class="n">path</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">get_cmd_output</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)))</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ONE RESOURCE FOUND&quot;</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">SpaseResource</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MORE THEN ONE RESOURCE FOUND WITH THE NAME </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
      <span class="k">return</span> <span class="n">SpaseResource</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;RESOURCE DOES NOT EXIST&quot;</span><span class="p">)</span>
      <span class="k">return</span> <span class="kc">None</span></div></div>

<div class="viewcode-block" id="get_cmd_output"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.get_cmd_output">[docs]</a><span class="k">def</span> <span class="nf">get_cmd_output</span><span class="p">(</span><span class="n">cmd</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Run a command and get output</span>

<span class="sd">  :param cmd: command</span>
<span class="sd">  :type cmd: str</span>
<span class="sd">  :return: output</span>
<span class="sd">  :rtype: str</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> &gt; temp.output&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cmd</span><span class="p">))</span>
  <span class="n">a</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
  <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;temp.output&quot;</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">a</span><span class="o">=</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
  <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm temp.output&quot;</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">a</span></div>

     
<div class="viewcode-block" id="parse_args"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.parse_args">[docs]</a><span class="k">def</span> <span class="nf">parse_args</span><span class="p">():</span>
  <span class="sd">&quot;&quot;&quot;Parse command line args</span>

<span class="sd">  :return: command line arguments</span>
<span class="sd">  :rtype: argparse.Arguments</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">parser</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
  <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--duplicates&quot;</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s2">&quot;show duplicate resources.&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">)</span>
  <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-l&quot;</span><span class="p">,</span><span class="s2">&quot;--list&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;list resources.&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">)</span>
  <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-p&quot;</span><span class="p">,</span><span class="s2">&quot;--person&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;focus Person resources.&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">)</span>
  <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-o&quot;</span><span class="p">,</span><span class="s2">&quot;--observatory&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;focus Observatory resources.&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">)</span>
  <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-i&quot;</span><span class="p">,</span><span class="s2">&quot;--instrument&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;focus Instrument resources.&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">)</span>
  <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-n&quot;</span><span class="p">,</span><span class="s2">&quot;--numericaldata&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;focus NumericalData resources&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">)</span>
  <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-r&quot;</span><span class="p">,</span><span class="s2">&quot;--root&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;set root directory.&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_REPOSITORY_ROOT</span><span class="p">)</span>
  <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--listbad&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;list bad files.&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">)</span>
  <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-e&quot;</span><span class="p">,</span><span class="s2">&quot;--edit&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;start resource editor.&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">)</span>
  <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-f&quot;</span><span class="p">,</span><span class="s2">&quot;--find&quot;</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s2">&quot;find resource file by name.&quot;</span><span class="p">,</span><span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span></div>

<div class="viewcode-block" id="rtype_from_args"><a class="viewcode-back" href="../../amdapy.html#amdapy.spase.rtype_from_args">[docs]</a><span class="k">def</span> <span class="nf">rtype_from_args</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Get list of resource types from args</span>

<span class="sd">  :return: list of types</span>
<span class="sd">  :rtype: list</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">rtype</span><span class="o">=</span><span class="p">[]</span>
  <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">person</span><span class="p">:</span>
    <span class="n">rtype</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">PERSON_TYPE</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">observatory</span><span class="p">:</span>
    <span class="n">rtype</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">OBSERVATORY_TYPE</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">instrument</span><span class="p">:</span>
    <span class="n">rtype</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">INSTRUMENT_TYPE</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">numericaldata</span><span class="p">:</span>
    <span class="n">rtype</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">NUMERICALDATA_TYPE</span><span class="p">)</span>
  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rtype</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
    <span class="k">return</span> <span class="kc">None</span>
  <span class="k">return</span> <span class="n">rtype</span></div>

<span class="c1">## ---------------------------------------MAIN-----------------------------------</span>
<span class="c1">#</span>
<span class="c1">#  Main function.</span>
<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
  <span class="n">args</span><span class="o">=</span><span class="n">parse_args</span><span class="p">()</span>

  <span class="c1"># initialize the SPASE resource manager.</span>
  <span class="n">repo_path</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">root</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Initializing the SpaseManager at </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">repo_path</span><span class="p">))</span>
  <span class="n">man</span><span class="o">=</span><span class="n">SpaseManager</span><span class="p">(</span><span class="n">repo_path</span><span class="p">)</span>

  <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">list</span><span class="p">:</span>
    <span class="n">rtype</span><span class="o">=</span><span class="n">rtype_from_args</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rtype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">man</span><span class="o">.</span><span class="n">iter_resource</span><span class="p">():</span>
        <span class="n">res_type</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">resource_type</span><span class="p">()</span>
        <span class="n">res_id</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">resource_id</span><span class="p">()</span>
        <span class="n">res_valid</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">valid</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> : </span><span class="si">{}</span><span class="s2"> valid:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">res_type</span><span class="p">,</span> <span class="n">res_id</span><span class="p">,</span> <span class="n">res_valid</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">rtype</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">man</span><span class="o">.</span><span class="n">iter_resource</span><span class="p">(</span><span class="n">rtype</span><span class="o">=</span><span class="n">t</span><span class="p">):</span>
          <span class="n">res_type</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">resource_type</span><span class="p">()</span>
          <span class="n">res_id</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">resource_id</span><span class="p">()</span>
          <span class="n">res_valid</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">valid</span><span class="p">()</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> : </span><span class="si">{}</span><span class="s2"> valid:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">res_type</span><span class="p">,</span> <span class="n">res_id</span><span class="p">,</span> <span class="n">res_valid</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">listbad</span><span class="p">:</span>
    <span class="n">badids</span><span class="o">=</span><span class="n">man</span><span class="o">.</span><span class="n">get_bad_ids</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">filename</span><span class="p">,</span><span class="n">id_</span> <span class="ow">in</span> <span class="n">badids</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;BADID : </span><span class="si">{}</span><span class="s2"> : </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="n">id_</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of bad id&#39;d files : </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">man</span><span class="o">.</span><span class="n">get_bad_ids</span><span class="p">())))</span>
  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">find</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Searching for resource by name : </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">find</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">man</span><span class="o">.</span><span class="n">find_resource</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">find</span><span class="p">))</span>

  <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">edit</span><span class="p">:</span>
    <span class="n">create_numerical_data</span><span class="p">(</span><span class="s2">&quot;numericaldata_empty.xml&quot;</span><span class="p">)</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">amdapy 1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, Alexandre Schulz.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>